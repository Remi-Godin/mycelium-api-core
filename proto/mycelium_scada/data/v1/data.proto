syntax = "proto3";

package plcdata;

import "google/protobuf/timestamp.proto";

// PlcDataType enum defines the original source type from the PLC.
enum PlcDataType {
  TYPE_UNKNOWN = 0;
  TYPE_BOOL = 1;    // Mapped to bool
  TYPE_STRING = 2;  // Mapped to string
  TYPE_WORD = 3;    // Mapped to uint32
  TYPE_DWORD = 4;   // Mapped to uint32
  TYPE_LWORD = 5;   // Mapped to uint64
  TYPE_SINT = 6;    // Mapped to sint32
  TYPE_INT = 7;     // Mapped to sint32
  TYPE_DINT = 8;    // Mapped to sint32
  TYPE_LINT = 9;    // Mapped to sint64
  TYPE_USINT = 10;  // Mapped to uint32
  TYPE_UINT = 11;   // Mapped to uint32
  TYPE_UDINT = 12;  // Mapped to uint32
  TYPE_ULINT = 13;  // Mapped to uint64
  TYPE_REAL = 14;   // Mapped to float
  TYPE_LREAL = 15;  // Mapped to double
  TYPE_BYTE = 16;   // Mapped to uint32
}

// Wrapper messages for arrays of values
message BoolArray {
  repeated bool values = 1;
}
message StringArray {
  repeated string values = 1;
}
message S32Array {
  repeated sint32 values = 1;
}
message U32Array {
  repeated uint32 values = 1;
}
message S64Array {
  repeated sint64 values = 1;
}
message U64Array {
  repeated uint64 values = 1;
}
message FloatArray {
  repeated float values = 1;
}
message DoubleArray {
  repeated double values = 1;
}


// Message to send a SINGLE instance of any of the PLC data types.
message PlcValue {
  PlcDataType data_type = 1;
  oneof value {
    bool bool_value = 2;
    string string_value = 3;
    sint32 s32_value = 4;
    uint32 u32_value = 5;
    sint64 s64_value = 6;
    uint64 u64_value = 7;
    float float_value = 8;
    double double_value = 9;
  }
  TagMetadata tag_metadata = 10;
}

message PlcValueArray {
  PlcDataType data_type = 1;
  oneof value {
    BoolArray bool_value = 2;
    StringArray string_value = 3;
    S32Array s32_value = 4;
    U32Array u32_value = 5;
    S64Array s64_value = 6;
    U64Array u64_value = 7;
    FloatArray float_value = 8;
    DoubleArray double_value = 9;
    bytes bytes_value = 10;
  }
  TagMetadata tag_metadata = 11;
}

message TagMetadata {
  string source_plc_name = 1;
  string source_tag_name = 2;
  google.protobuf.Timestamp timestamp = 3;
}
